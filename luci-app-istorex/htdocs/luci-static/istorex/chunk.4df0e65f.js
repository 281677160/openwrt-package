var F=(s,c,i)=>new Promise((u,l)=>{var d=t=>{try{p(i.next(t))}catch(m){l(m)}},k=t=>{try{p(i.throw(t))}catch(m){l(m)}},p=t=>t.done?u(t.value):Promise.resolve(t.value).then(d,k);p((i=i.apply(s,c)).next())});import{_ as E,d as x,V as A,h as S,i as y,r as f,o as a,c as o,a as e,B as V,l as r,g as n,F as _,b,m as v,T as B,C as w,p as N,q as T,E as C,e as $}from"./index.js";const I=s=>(N("data-v-300b5aae"),s=s(),T(),s),q={class:"app-item"},O={class:"app-card"},U={class:"app-item_icon"},j=["src"],L={class:"app-item_info"},M={class:"app-title"},P={class:"app-as"},z=I(()=>e("span",{style:{margin:"0 10px"}},"|",-1)),G=["title"],H={key:0,class:"app-btn"},J={key:1,class:"app-btn"},K=I(()=>e("div",null,null,-1)),Q=x({__name:"app",props:{app:{type:Object,required:!0}},setup(s){const c=s,i=A(),u=S.numberFormat,l=y(()=>i.appsExpand[c.app.name]||{downloadCount:0,isStar:null,name:c.app.name,starCount:0}),d=()=>{B.Message("\u60A8\u5DF2\u70B9\u8D5E\u8FC7\u4E86")},k=()=>F(this,null,function*(){var p;try{const t=yield w.ApiStore.star.POST({appId:c.app.name,deviceId:S.getDeviceId()});((p=t==null?void 0:t.data)==null?void 0:p.success)==0&&i.appsExpand[c.app.name]&&(i.appsExpand[c.app.name].isStar=!0)}catch(t){B.Error(`${t}`)}});return(p,t)=>{const m=f("icon-star-off"),D=f("icon-star-on");return a(),o("div",q,[e("div",O,[e("div",U,[e("img",{src:s.app.getIcon(),alt:""},null,8,j)]),e("div",L,[e("div",M,[V(r(s.app.title)+" ",1),e("em",null,r(s.app.version),1)]),e("div",P,[e("span",null,r(n(u)(n(l).downloadCount))+" \u6B21\u4E0B\u8F7D ",1),z,e("span",null,r(n(u)(n(l).starCount))+" \u6B21\u70B9\u8D5E ",1),n(l).isStar!=null?(a(),o(_,{key:0},[n(l).isStar?(a(),o("a",{key:0,class:"star-btn",onClick:t[0]||(t[0]=h=>d())},[b(m)])):(a(),o("a",{key:1,class:"star-btn",onClick:t[1]||(t[1]=h=>k())},[b(D)]))],64)):v("",!0)]),e("div",{class:"app-desc",title:s.app.description},r(s.app.description),9,G)])]),s.app.isInstall()?(a(),o("div",H,[s.app.isUpdate()?(a(),o("button",{key:0,class:"update",onClick:t[2]||(t[2]=h=>s.app.update())}," \u66F4\u65B0 ")):v("",!0),e("button",{class:"del",onClick:t[3]||(t[3]=h=>s.app.uninstall())},"\u5378\u8F7D"),e("button",{onClick:t[4]||(t[4]=h=>s.app.openApp()),class:"open"},"\u6253\u5F00")])):(a(),o("div",J,[K,e("button",{class:"install",onClick:t[5]||(t[5]=h=>s.app.install())}," \u5B89\u88C5")]))])}}});var g=E(Q,[["__scopeId","data-v-300b5aae"]]);const R={key:0},W={class:"section-title"},X={class:"section-list"},Y={key:1},Z={class:"section-title"},tt={class:"section-list"},et={key:2},st={class:"section-title"},at={class:"section-list"},nt=x({__name:"appStore",setup(s){const c=A(),i=y(()=>c.localApps||[]),u=y(()=>c.remoteApps||[]),l=y(()=>i.value.filter(d=>d.isUpdate()));return(d,k)=>(a(),o(_,null,[n(l).length>0?(a(),o("section",R,[e("div",W," \u53EF\u66F4\u65B0 ("+r(n(l).length)+") ",1),e("div",X,[(a(!0),o(_,null,C(n(l),p=>(a(),$(g,{app:p},null,8,["app"]))),256))])])):v("",!0),n(i).length>0?(a(),o("section",Y,[e("div",Z," \u5DF2\u5B89\u88C5 ("+r(n(i).length)+") ",1),e("div",tt,[(a(!0),o(_,null,C(n(i),p=>(a(),$(g,{app:p},null,8,["app"]))),256))])])):v("",!0),n(u).length>0?(a(),o("section",et,[e("div",st," \u5168\u90E8\u8F6F\u4EF6 ("+r(n(u).length)+") ",1),e("div",at,[(a(!0),o(_,null,C(n(u),p=>(a(),o(_,null,[p.isInstall()?v("",!0):(a(),$(g,{key:0,app:p},null,8,["app"]))],64))),256))])])):v("",!0)],64))}});var it=E(nt,[["__scopeId","data-v-67afa7ec"]]);export{it as a};
