import{r as o,j as h,g as C,C as Pe,N as Se,Z as A,k as q,R as S,O as Re,M as Ae,T as Te}from"./vendor.3cf270b6.js";import{B as x,E as Me,F as re,N as ne,c as b,G as oe,H,k as L,I as Le,J as se,K as j,L as W,M as Ne,O as De,P as $e,Q as ae,R as Fe,g as ie,C as ce,l as V,T as Ie,m as K,U as ze,V as Be,W as qe,X as He}from"./index.d6596dd6.js";import{F as je,p as We,A as Ge,I as Ue}from"./Fab.78b2c04b.js";import{R as Ve,T as Ke}from"./TextFitler.97029c74.js";import{f as Ze}from"./index.afdc8976.js";import{S as Ye}from"./Select.9583f722.js";import"./debounce.76599460.js";const Je="_FlexCenter_1380a_1";var Qe={FlexCenter:Je};function Xe({children:e}){return o.exports.createElement("div",{className:Qe.FlexCenter},e)}const{useRef:Z,useEffect:et}=h;function tt({onClickPrimaryButton:e,onClickSecondaryButton:t}){const r=Z(null),n=Z(null);et(()=>{r.current.focus()},[]);const s=a=>{a.keyCode===39?n.current.focus():a.keyCode===37&&r.current.focus()};return o.exports.createElement("div",{onKeyDown:s},o.exports.createElement("h2",null,"Close Connections?"),o.exports.createElement("p",null,'Click "Yes" to close those connections that are still using the old selected proxy in this group'),o.exports.createElement("div",{style:{height:30}}),o.exports.createElement(Xe,null,o.exports.createElement(x,{onClick:e,ref:r},"Yes"),o.exports.createElement("div",{style:{width:20}}),o.exports.createElement(x,{onClick:t,ref:n},"No")))}const rt="_header_1y9js_1",nt="_arrow_1y9js_8",ot="_isOpen_1y9js_13",st="_btn_1y9js_20",at="_qty_1y9js_25";var E={header:rt,arrow:nt,isOpen:ot,btn:st,qty:at};function le({name:e,type:t,toggle:r,isOpen:n,qty:s}){const a=o.exports.useCallback(i=>{i.preventDefault(),(i.key==="Enter"||i.key===" ")&&r()},[r]);return o.exports.createElement("div",{className:E.header,onClick:r,style:{cursor:"pointer"},tabIndex:0,onKeyDown:a,role:"button"},o.exports.createElement("div",null,o.exports.createElement(Me,{name:e,type:t})),typeof s=="number"?o.exports.createElement("span",{className:E.qty},s):null,o.exports.createElement(x,{kind:"minimal",onClick:r,className:E.btn,title:"Toggle collapsible section"},o.exports.createElement("span",{className:C(E.arrow,{[E.isOpen]:n})},o.exports.createElement(Pe,{size:20}))))}const{useMemo:it}=h;function ct(e,t){return e.filter(r=>{const n=t[r];return n===void 0?!0:n.number!==0})}const k=(e,t)=>{if(e&&typeof e.number=="number"&&e.number>0)return e.number;const r=t&&t.type;return r&&ne.indexOf(r)>-1?-1:999999},lt={Natural:e=>e,LatencyAsc:(e,t,r)=>e.sort((n,s)=>{const a=k(t[n],r&&r[n]),i=k(t[s],r&&r[s]);return a-i}),LatencyDesc:(e,t,r)=>e.sort((n,s)=>{const a=k(t[n],r&&r[n]);return k(t[s],r&&r[s])-a}),NameAsc:e=>e.sort(),NameDesc:e=>e.sort((t,r)=>t>r?-1:t<r?1:0)};function ut(e,t){const r=t.toLowerCase().split(" ").map(n=>n.trim()).filter(n=>!!n);return r.length===0?e:e.filter(n=>{let s=0;for(;s<r.length;s++){const a=r[s];if(n.toLowerCase().indexOf(a)>-1)return!0}return!1})}function pt(e,t,r,n,s,a){let i=[...e];return r&&(i=ct(e,t)),typeof n=="string"&&n!==""&&(i=ut(i,n)),lt[s](i,t,a)}function ue(e,t,r,n,s){const[a]=Se(re);return it(()=>pt(e,t,r,a,n,s),[e,t,r,a,n,s])}const dt="_header_1g0y5_1",ft="_zapWrapper_1g0y5_5";var pe={header:dt,zapWrapper:ft};const de={Right:39,Left:37,Enter:13,Space:32},mt="_proxy_sq0tg_1",ht="_now_sq0tg_25",vt="_error_sq0tg_29",yt="_selectable_sq0tg_32",xt="_proxyType_sq0tg_40",_t="_row_sq0tg_51",bt="_proxyName_sq0tg_57",Et="_proxySmall_sq0tg_68";var m={proxy:mt,now:ht,error:vt,selectable:yt,proxyType:xt,row:_t,proxyName:bt,proxySmall:Et};const gt="_proxyLatency_15kyb_1";var wt={proxyLatency:gt};function Ct({number:e,color:t}){return o.exports.createElement("span",{className:wt.proxyLatency,style:{color:t}},o.exports.createElement("span",null,e," ms"))}const{useMemo:w}=h,g={good:"#67c23a",normal:"#d4b75c",bad:"#e67f3c",na:"#909399"};function fe({number:e}={}){return e===0?g.na:e<200?g.good:e<400?g.normal:typeof e=="number"?g.bad:g.na}function Ot(e,t){return ne.indexOf(t)>-1?"linear-gradient(135deg, white 15%, #999 15% 30%, white 30% 45%, #999 45% 60%, white 60% 75%, #999 75% 90%, white 90% 100%)":fe(e)}function kt({now:e,name:t,proxy:r,latency:n,isSelectable:s,onClick:a}){const i=w(()=>Ot(n,r.type),[n,r]),c=w(()=>{let d=t;return n&&typeof n.number=="number"&&(d+=" "+n.number+" ms"),d},[t,n]),l=o.exports.useCallback(()=>{s&&a&&a(t)},[t,a,s]),u=w(()=>C(m.proxySmall,{[m.now]:e,[m.selectable]:s}),[s,e]),p=o.exports.useCallback(d=>{d.keyCode===de.Enter&&l()},[l]);return o.exports.createElement("div",{title:c,className:u,style:{background:i},onClick:l,onKeyDown:p,role:s?"menuitem":""})}function Pt(e){return e==="Shadowsocks"?"SS":e}function St({now:e,name:t,proxy:r,latency:n,isSelectable:s,onClick:a}){const i=w(()=>fe(n),[n]),c=o.exports.useCallback(()=>{s&&a&&a(t)},[t,a,s]),l=o.exports.useCallback(p=>{p.keyCode===de.Enter&&c()},[c]),u=w(()=>C(m.proxy,{[m.now]:e,[m.error]:n&&n.error,[m.selectable]:s}),[s,e,n]);return o.exports.createElement("div",{tabIndex:0,className:u,onClick:c,onKeyDown:l,role:s?"menuitem":""},o.exports.createElement("div",{className:m.proxyName},t),o.exports.createElement("div",{className:m.row},o.exports.createElement("span",{className:m.proxyType,style:{opacity:e?.6:.2}},Pt(r.type)),n&&n.number?o.exports.createElement(Ct,{number:n.number,color:i}):null))}const me=(e,{name:t})=>{const r=oe(e),n=H(e);return{proxy:r[t],latency:n[t]}},Rt=b(me)(St),At=b(me)(kt),Tt="_list_10y5m_1",Mt="_listSummaryView_10y5m_8";var he={list:Tt,listSummaryView:Mt};function ve({all:e,now:t,isSelectable:r,itemOnTapCallback:n}){const s=e;return o.exports.createElement("div",{className:he.list},s.map(a=>o.exports.createElement(Rt,{key:a,onClick:n,isSelectable:r,name:a,now:a===t})))}function ye({all:e,now:t,isSelectable:r,itemOnTapCallback:n}){return o.exports.createElement("div",{className:he.listSummaryView},e.map(s=>o.exports.createElement(At,{key:s,onClick:n,isSelectable:r,name:s,now:s===t})))}const{createElement:Lt,useCallback:F,useMemo:Nt,useState:Dt}=h;function $t(){return o.exports.createElement("div",{className:pe.zapWrapper},o.exports.createElement(A,{size:16}))}function Ft({name:e,all:t,delay:r,hideUnavailableProxies:n,proxySortBy:s,proxies:a,type:i,now:c,isOpen:l,apiConfig:u,dispatch:p}){const d=ue(t,r,n,s,a),v=Nt(()=>i==="Selector",[i]),{app:{updateCollapsibleIsOpen:y},proxies:{requestDelayForProxies:f}}=L(),O=F(()=>{y("proxyGroup",e,!l)},[l,y,e]),D=F(U=>{!v||p(Le(u,e,U))},[u,p,e,v]),[$,G]=Dt(!1),ke=F(async()=>{G(!0);try{await f(u,d)}catch{}G(!1)},[d,u,f]);return o.exports.createElement("div",{className:pe.group},o.exports.createElement("div",{style:{display:"flex",alignItems:"center"}},o.exports.createElement(le,{name:e,type:i,toggle:O,qty:d.length,isOpen:l}),o.exports.createElement(x,{title:"Test latency",kind:"minimal",onClick:ke,isLoading:$},o.exports.createElement($t,null))),Lt(l?ve:ye,{all:d,now:c,isSelectable:v,itemOnTapCallback:D}))}const It=b((e,{name:t,delay:r})=>{const n=oe(e),s=se(e),a=j(e),i=W(e),c=n[t],{all:l,type:u,now:p}=c;return{all:l,delay:r,hideUnavailableProxies:i,proxySortBy:a,proxies:n,type:u,now:p,isOpen:s[`proxyGroup:${t}`]}})(Ft),{useCallback:xe,useState:zt}=h;function Bt({dispatch:e,apiConfig:t,name:r}){return xe(()=>e(Ne(t,r)),[t,e,r])}function qt({dispatch:e,apiConfig:t,names:r}){const[n,s]=zt(!1);return[xe(async()=>{if(!n){s(!0);try{await e(De(t,r))}catch{}s(!1)}},[t,e,r,n]),n]}const{useState:Ht,useCallback:jt}=h;function Wt({isLoading:e}){return e?o.exports.createElement(Ue,null,o.exports.createElement(A,{width:16,height:16})):o.exports.createElement(A,{width:16,height:16})}function Gt({dispatch:e,apiConfig:t}){const[r,n]=Ht(!1);return[jt(()=>{r||(n(!0),e($e(t)).then(()=>n(!1),()=>n(!1)))},[t,e,r]),r]}function Ut({dispatch:e,apiConfig:t,proxyProviders:r}){const{t:n}=q(),[s,a]=Gt({dispatch:e,apiConfig:t}),[i,c]=qt({apiConfig:t,dispatch:e,names:r.map(l=>l.name)});return o.exports.createElement(je,{icon:o.exports.createElement(Wt,{isLoading:a}),onClick:s,text:n("Test Latency"),style:We},r.length>0?o.exports.createElement(Ge,{text:n("update_all_proxy_provider"),onClick:i},o.exports.createElement(Ve,{isRotating:c})):null)}var _e=function(){if(typeof Map!="undefined")return Map;function e(t,r){var n=-1;return t.some(function(s,a){return s[0]===r?(n=a,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),s=this.__entries__[n];return s&&s[1]},t.prototype.set=function(r,n){var s=e(this.__entries__,r);~s?this.__entries__[s][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,s=e(n,r);~s&&n.splice(s,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var s=0,a=this.__entries__;s<a.length;s++){var i=a[s];r.call(n,i[1],i[0])}},t}()}(),B=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,T=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),Vt=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(T):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),Kt=2;function Zt(e,t){var r=!1,n=!1,s=0;function a(){r&&(r=!1,e()),n&&c()}function i(){Vt(a)}function c(){var l=Date.now();if(r){if(l-s<Kt)return;n=!0}else r=!0,n=!1,setTimeout(i,t);s=l}return c}var Yt=20,Jt=["top","right","bottom","left","width","height","size","weight"],Qt=typeof MutationObserver!="undefined",Xt=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Zt(this.refresh.bind(this),Yt)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!B||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Qt?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!B||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,s=Jt.some(function(a){return!!~n.indexOf(a)});s&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),be=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];Object.defineProperty(e,s,{value:t[s],enumerable:!1,writable:!1,configurable:!0})}return e},_=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||T},Ee=N(0,0,0,0);function M(e){return parseFloat(e)||0}function Y(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,s){var a=e["border-"+s+"-width"];return n+M(a)},0)}function er(e){for(var t=["top","right","bottom","left"],r={},n=0,s=t;n<s.length;n++){var a=s[n],i=e["padding-"+a];r[a]=M(i)}return r}function tr(e){var t=e.getBBox();return N(0,0,t.width,t.height)}function rr(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return Ee;var n=_(e).getComputedStyle(e),s=er(n),a=s.left+s.right,i=s.top+s.bottom,c=M(n.width),l=M(n.height);if(n.boxSizing==="border-box"&&(Math.round(c+a)!==t&&(c-=Y(n,"left","right")+a),Math.round(l+i)!==r&&(l-=Y(n,"top","bottom")+i)),!or(e)){var u=Math.round(c+a)-t,p=Math.round(l+i)-r;Math.abs(u)!==1&&(c-=u),Math.abs(p)!==1&&(l-=p)}return N(s.left,s.top,c,l)}var nr=function(){return typeof SVGGraphicsElement!="undefined"?function(e){return e instanceof _(e).SVGGraphicsElement}:function(e){return e instanceof _(e).SVGElement&&typeof e.getBBox=="function"}}();function or(e){return e===_(e).document.documentElement}function sr(e){return B?nr(e)?tr(e):rr(e):Ee}function ar(e){var t=e.x,r=e.y,n=e.width,s=e.height,a=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,i=Object.create(a.prototype);return be(i,{x:t,y:r,width:n,height:s,top:r,right:t+n,bottom:s+r,left:t}),i}function N(e,t,r,n){return{x:e,y:t,width:r,height:n}}var ir=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=N(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=sr(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),cr=function(){function e(t,r){var n=ar(r);be(this,{target:t,contentRect:n})}return e}(),lr=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new _e,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof _(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new ir(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof _(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;!r.has(t)||(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(!!this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new cr(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),ge=typeof WeakMap!="undefined"?new WeakMap:new _e,we=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=Xt.getInstance(),n=new lr(t,r,this);ge.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){we.prototype[e]=function(){var t;return(t=ge.get(this))[e].apply(t,arguments)}});var ur=function(){return typeof T.ResizeObserver!="undefined"?T.ResizeObserver:we}();const{memo:pr,useState:dr,useRef:Ce,useEffect:Oe}=S;function fr(e){const t=Ce();return Oe(()=>void(t.current=e),[e]),t.current}function mr(){const e=Ce(),[t,r]=dr({height:0});return Oe(()=>{const n=new ur(([s])=>r(s.contentRect));return e.current&&n.observe(e.current),()=>n.disconnect()},[]),[e,t]}const hr={initialOpen:{height:"auto",transition:{duration:0}},open:e=>({height:e,opacity:1,visibility:"visible",transition:{duration:.3}}),closed:{height:0,opacity:0,visibility:"hidden",transition:{duration:.3}}},vr={open:{x:0},closed:{x:20}},J=pr(({children:e,isOpen:t})=>{const n=ae.read().motion,s=fr(t),[a,{height:i}]=mr();return S.createElement("div",null,S.createElement(n.div,{animate:t&&s===t?"initialOpen":t?"open":"closed",custom:i,variants:hr},S.createElement(n.div,{variants:vr,ref:a},e)))}),yr="_updatedAt_1ql33_1",xr="_body_1ql33_8",_r="_actionFooter_1ql33_17",br="_refresh_1ql33_27";var R={updatedAt:yr,body:xr,actionFooter:_r,refresh:br};const{useState:Er,useCallback:Q}=h;function gr({name:e,proxies:t,delay:r,hideUnavailableProxies:n,proxySortBy:s,vehicleType:a,updatedAt:i,isOpen:c,dispatch:l,apiConfig:u}){const p=ue(t,r,n,s),[d,v]=Er(!1),y=Bt({dispatch:l,apiConfig:u,name:e}),f=Q(async()=>{v(!0),await l(Fe(u,e)),v(!1)},[u,l,e,v]),{app:{updateCollapsibleIsOpen:O}}=L(),D=Q(()=>{O("proxyProvider",e,!c)},[c,O,e]),$=Ze(new Date(i),new Date);return o.exports.createElement("div",{className:R.body},o.exports.createElement(le,{name:e,toggle:D,type:a,isOpen:c,qty:p.length}),o.exports.createElement("div",{className:R.updatedAt},o.exports.createElement("small",null,"Updated ",$," ago")),o.exports.createElement(J,{isOpen:c},o.exports.createElement(ve,{all:p}),o.exports.createElement("div",{className:R.actionFooter},o.exports.createElement(x,{text:"Update",start:o.exports.createElement(Or,null),onClick:y}),o.exports.createElement(x,{text:"Health Check",start:o.exports.createElement(A,{size:16}),onClick:f,isLoading:d}))),o.exports.createElement(J,{isOpen:!c},o.exports.createElement(ye,{all:p})))}const wr={rest:{scale:1},pressed:{scale:.95}},Cr={rest:{rotate:0},hover:{rotate:360,transition:{duration:.3}}};function Or(){const t=ae.read().motion;return o.exports.createElement(t.div,{className:R.refresh,variants:wr,initial:"rest",whileHover:"hover",whileTap:"pressed"},o.exports.createElement(t.div,{className:"flexCenter",variants:Cr},o.exports.createElement(Re,{size:16})))}const kr=(e,{proxies:t,name:r})=>{const n=W(e),s=H(e),a=se(e),i=ie(e),c=j(e);return{apiConfig:i,proxies:t,delay:s,hideUnavailableProxies:n,proxySortBy:c,isOpen:a[`proxyProvider:${r}`]}},Pr=b(kr)(gr);function Sr({items:e}){return e.length===0?null:o.exports.createElement(o.exports.Fragment,null,o.exports.createElement(ce,{title:"Proxy Provider"}),o.exports.createElement("div",null,e.map(t=>o.exports.createElement(Pr,{key:t.name,name:t.name,proxies:t.proxies,type:t.type,vehicleType:t.vehicleType,updatedAt:t.updatedAt}))))}const Rr="_labeledInput_cmki0_1";var I={labeledInput:Rr};const Ar=[["Natural","order_natural"],["LatencyAsc","order_latency_asc"],["LatencyDesc","order_latency_desc"],["NameAsc","order_name_asc"],["NameDesc","order_name_desc"]],{useCallback:X}=h;function Tr({appConfig:e}){const{app:{updateAppConfig:t}}=L(),r=X(a=>{t("proxySortBy",a.target.value)},[t]),n=X(a=>{t("hideUnavailableProxies",a)},[t]),{t:s}=q();return o.exports.createElement(o.exports.Fragment,null,o.exports.createElement("div",{className:I.labeledInput},o.exports.createElement("span",null,s("sort_in_grp")),o.exports.createElement("div",null,o.exports.createElement(Ye,{options:Ar.map(a=>[a[0],s(a[1])]),selected:e.proxySortBy,onChange:r}))),o.exports.createElement("hr",null),o.exports.createElement("div",{className:I.labeledInput},o.exports.createElement("span",null,s("hide_unavail_proxies")),o.exports.createElement("div",null,o.exports.createElement(V,{name:"hideUnavailableProxies",checked:e.hideUnavailableProxies,onChange:n}))),o.exports.createElement("div",{className:I.labeledInput},o.exports.createElement("span",null,s("auto_close_conns")),o.exports.createElement("div",null,o.exports.createElement(V,{name:"autoCloseOldConns",checked:e.autoCloseOldConns,onChange:a=>t("autoCloseOldConns",a)}))))}const Mr=e=>{const t=j(e),r=W(e),n=Ie(e);return{appConfig:{proxySortBy:t,hideUnavailableProxies:r,autoCloseOldConns:n}}};var Lr=b(Mr)(Tr);const Nr="_overlay_uuk3b_1",Dr="_cnt_uuk3b_5",$r="_afterOpen_uuk3b_16";var z={overlay:Nr,cnt:Dr,afterOpen:$r};const{useMemo:Fr}=h;function ee({isOpen:e,onRequestClose:t,children:r}){const n=Fr(()=>({base:C(K.content,z.cnt),afterOpen:z.afterOpen,beforeClose:""}),[]);return o.exports.createElement(Ae,{isOpen:e,onRequestClose:t,className:n,overlayClassName:C(K.overlay,z.overlay)},r)}function Ir({color:e="currentColor",size:t=24}){return o.exports.createElement("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,stroke:e,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o.exports.createElement("path",{d:"M2 6h9M18.5 6H22"}),o.exports.createElement("circle",{cx:"16",cy:"6",r:"2"}),o.exports.createElement("path",{d:"M22 18h-9M6 18H2"}),o.exports.createElement("circle",{r:"2",transform:"matrix(-1 0 0 1 8 18)"}))}const zr="_topBar_jgy4z_1",Br="_topBarRight_jgy4z_13",qr="_textFilterContainer_jgy4z_22",Hr="_group_jgy4z_29";var P={topBar:zr,topBarRight:Br,textFilterContainer:qr,group:Hr};const{useState:jr,useEffect:Wr,useCallback:te,useRef:Gr}=h;function Ur({dispatch:e,groupNames:t,delay:r,proxyProviders:n,apiConfig:s,showModalClosePrevConns:a}){const i=Gr({}),c=te(()=>{i.current.startAt=Date.now(),e(ze(s)).then(()=>{i.current.completeAt=Date.now()})},[s,e]);Wr(()=>{c();const f=()=>{i.current.startAt&&Date.now()-i.current.startAt>3e4&&c()};return window.addEventListener("focus",f,!1),()=>window.removeEventListener("focus",f,!1)},[c]);const[l,u]=jr(!1),p=te(()=>{u(!1)},[]),{proxies:{closeModalClosePrevConns:d,closePrevConnsAndTheModal:v}}=L(),{t:y}=q();return o.exports.createElement(o.exports.Fragment,null,o.exports.createElement(ee,{isOpen:l,onRequestClose:p},o.exports.createElement(Lr,null)),o.exports.createElement("div",{className:P.topBar},o.exports.createElement(ce,{title:y("Proxies")}),o.exports.createElement("div",{className:P.topBarRight},o.exports.createElement("div",{className:P.textFilterContainer},o.exports.createElement(Ke,{textAtom:re})),o.exports.createElement(Te,{label:y("settings")},o.exports.createElement(x,{kind:"minimal",onClick:()=>u(!0)},o.exports.createElement(Ir,{size:16}))))),o.exports.createElement("div",null,t.map(f=>o.exports.createElement("div",{className:P.group,key:f},o.exports.createElement(It,{name:f,delay:r,apiConfig:s,dispatch:e})))),o.exports.createElement(Sr,{items:n}),o.exports.createElement("div",{style:{height:60}}),o.exports.createElement(Ut,{dispatch:e,apiConfig:s,proxyProviders:n}),o.exports.createElement(ee,{isOpen:a,onRequestClose:d},o.exports.createElement(tt,{onClickPrimaryButton:()=>v(s),onClickSecondaryButton:d})))}const Vr=e=>({apiConfig:ie(e),groupNames:Be(e),proxyProviders:qe(e),delay:H(e),showModalClosePrevConns:He(e)});var tn=b(Vr)(Ur);export{tn as default};
