(self.webpackChunkyacd=self.webpackChunkyacd||[]).push([[497],{9546:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return F}});t(21249),t(47042);var n=t(96156),a=t(34699),l=t(85893),i=t(45697),s=t.n(i),c=t(67294),o=t(6055),u=t(92669),d=t(81125),p=t(25904),f="_2drigWG08z",b="_3qy5-MPwaw",v="_1sbDIR8sCY",j="_1Hvw0QbyvH",y=t(82569),h=t(68970),g=t(86010),O="_1-_dHqCZpQ",x="_3r9QGmDKef",m="_3iVnjLFlaM";function w(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function P(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?w(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function k(e){var r=e.OptionComponent,t=e.optionPropsList,n=e.selectedIndex,a=e.onChange,i=(0,g.Z)("visually-hidden",x),s=function(e){a(e.target.value)};return(0,l.jsx)("fieldset",{className:O,children:t.map((function(e,t){return(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"radio",checked:n===t,name:"selection",value:t,"aria-labelledby":"traffic chart type "+t,onChange:s,className:i}),(0,l.jsx)("div",{className:m,children:(0,l.jsx)(r,P({},e))})]},t)}))})}var C=t(85295),D=t(26512),N=t(97148),S=t(66728),E=t(35227);function Z(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function I(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Z(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var T={legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1}]}},_=[23e3,35e3,46e3,33e3,9e4,68e3,23e3,45e3],A=[184e3,183e3,196e3,182e3,19e4,186e3,182e3,189e3],L=_;function M(e){var r=e.id,t=E.A8.read(),n=(0,c.useMemo)((function(){return{labels:L,datasets:[I(I(I({},E.IE),E.Eu[r].up),{},{data:_}),I(I(I({},E.IE),E.Eu[r].down),{},{data:A})]}}),[r]),a="chart-"+r;return(0,S.Z)(t,a,n,null,T),(0,l.jsx)("div",{style:{width:130,padding:5},children:(0,l.jsx)("canvas",{id:a})})}function R(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function U(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?R(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var G=c.useEffect,H=c.useState,W=c.useCallback,$=c.useRef,B=c.useMemo,Q=[{id:0},{id:1},{id:2},{id:3}],Y=[{label:"Global",value:"Global"},{label:"Rule",value:"Rule"},{label:"Direct",value:"Direct"}],q=[{label:"Debug",value:"debug"},{label:"Warning",value:"warning"},{label:"Info",value:"info"},{label:"Error",value:"error"},{label:"Silent",value:"silent"}],K=[{key:"port",label:"HTTP Proxy Port"},{key:"socks-port",label:"SOCKS5 Proxy Port"},{key:"mixed-port",label:"Mixed Port"},{key:"redir-port",label:"Redir Port"}],z=(0,C.$j)((function(e){return{selectedChartStyleIndex:(0,o.AM)(e),latencyTestUrl:(0,o.Bg)(e),apiConfig:(0,o.Y$)(e)}}))((function(e){var r=e.dispatch,t=e.configs,n=e.selectedChartStyleIndex,i=e.latencyTestUrl,s=e.apiConfig,c=H(t),o=(0,a.Z)(c,2),g=o[0],O=o[1],x=$(t);G((function(){x.current!==t&&O(t),x.current=t}),[t]);var m=W((function(){r((0,d.h7)("apiConfig"))}),[r]),w=W((function(e,r){O(U(U({},g),{},{[e]:r}))}),[g]),P=W((function(e){var t=e;w("allow-lan",t),r((0,u.wf)(s,{"allow-lan":t}))}),[s,r,w]),S=W((function(e){var t=e.target,n=t.name,a=t.value;switch(t.name){case"mode":case"log-level":w(n,a),r((0,u.wf)(s,{[n]:a}));break;case"redir-port":case"socks-port":case"mixed-port":case"port":if(""!==t.value){var l=parseInt(t.value,10);if(l<0||l>65535)return}w(n,a);break;default:return}}),[s,r,w]),E=(0,C.WX)(),Z=E.selectChartStyleIndex,I=E.updateAppConfig,T=W((function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"port":case"socks-port":case"mixed-port":case"redir-port":var l=parseInt(a,10);if(l<0||l>65535)return;r((0,u.wf)(s,{[n]:l}));break;case"latencyTestUrl":I(n,a);break;default:throw new Error("unknown input name "+n)}}),[s,r,I]),_=B((function(){var e=g.mode;return"string"==typeof e&&e[0].toUpperCase()+e.slice(1)}),[g.mode]);return(0,l.jsxs)("div",{children:[(0,l.jsx)(y.Z,{title:"Config"}),(0,l.jsxs)("div",{className:f,children:[K.map((function(e){return void 0!==g[e.key]?(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:j,children:e.label}),(0,l.jsx)(h.Z,{name:e.key,value:g[e.key],onChange:S,onBlur:T})]},e.key):null})),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:j,children:"Allow LAN"}),(0,l.jsx)(D.Z,{name:"allow-lan",checked:g["allow-lan"],onChange:P})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:j,children:"Mode"}),(0,l.jsx)(N.Z,{options:Y,name:"mode",value:_,onChange:S})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:j,children:"Log Level"}),(0,l.jsx)(N.Z,{options:q,name:"log-level",value:g["log-level"],onChange:S})]})]}),(0,l.jsx)("div",{className:v,children:(0,l.jsx)("div",{})}),(0,l.jsxs)("div",{className:b,children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:j,children:"Chart Style"}),(0,l.jsx)(k,{OptionComponent:M,optionPropsList:Q,selectedIndex:n,onChange:Z})]}),(0,l.jsxs)("div",{style:{maxWidth:360},children:[(0,l.jsx)("div",{className:j,children:"Latency Test URL"}),(0,l.jsx)(h.N,{name:"latencyTestUrl",type:"text",value:i,onBlur:T})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:j,children:"Action"}),(0,l.jsx)(p.Z,{label:"Switch backend",onClick:m})]})]})]})})),F=(0,C.$j)((function(e){return{configs:(0,u.G_)(e),apiConfig:(0,o.Y$)(e)}}))((function(e){var r=e.dispatch,t=e.configs,n=e.apiConfig;return G((function(){r((0,u.Tj)(n))}),[r,n]),(0,l.jsx)(z,{configs:t})}));z.propTypes={configs:s().object}}}]);
//# sourceMappingURL=config.7534714f251830314752.js.map